{"version":3,"sources":["index.js","aes.js","crypto/4mini/aes.js","qrcode.js","util.js","request.js","token.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ACHA,AFMA;ACFA,ACHA,AFMA;ACFA,ACHA,AFMA;ACFA,ACHA,AFMA,AGTA;AFOA,ACHA,AFMA,AGTA;AFOA,ACHA,AFMA,AGTA;AFOA,ACHA,AFMA,AGTA,ACHA;AHUA,ACHA,AFMA,AGTA,ACHA;AHUA,ACHA,AFMA,AGTA,ACHA;AHUA,ACHA,AFMA,AGTA,AENA,ADGA;AHUA,ACHA,AFMA,AGTA,AENA,ADGA;AHUA,ACHA,AFMA,AGTA,AENA,ADGA;AHUA,ACHA,AFMA,AGTA,AENA,ACHA,AFMA;AHUA,ACHA,AFMA,AGTA,AENA,ACHA,AFMA;AHUA,ACHA,AFMA,AGTA,AENA,ACHA,AFMA;AHUA,ACHA,AFMA,AGTA,AENA,ACHA,AFMA;AHUA,ACHA,AFMA,AGTA,AENA,ACHA,AFMA;AHUA,ACHA,AFMA,AGTA,AENA,ACHA,AFMA;AHUA,ACHA,AFMA,AGTA,AENA,ACHA,AFMA;AHUA,ACHA,AFMA,AGTA,AENA,ACHA,AFMA;AHUA,ACHA,AFMA,AGTA,AENA,ACHA,AFMA;AHUA,ACHA,ACHA,AENA,ACHA,AFMA;AHUA,ACHA,ACHA,AENA,ACHA,AFMA;AHUA,ACHA,ACHA,AENA,ACHA,AFMA;AHUA,ACHA,ACHA,AENA,ACHA,AFMA;AHUA,ACHA,ACHA,AENA,ACHA,AFMA;AHUA,ACHA,ACHA,AENA,ACHA,AFMA;AHUA,ACHA,ACHA,AENA,ACHA,AFMA;AHUA,ACHA,ACHA,AENA,ACHA,AFMA;AHUA,ACHA,ACHA,AENA,ACHA,AFMA;AHUA,ACHA,ACHA,AENA,ACHA,AFMA;AHUA,ACHA,ACHA,AENA,ACHA,AFMA;AHUA,ACHA,ACHA,AENA,ACHA,AFMA;AHUA,ACHA,ACHA,AENA,ACHA,AFMA;AHUA,ACHA,ACHA,AENA,ACHA,AFMA;AHUA,ACHA,ACHA,AENA,ACHA,AFMA;AHUA,ACHA,ACHA,AENA,ACHA,AFMA;AHUA,AENA,AENA,ACHA,AFMA;AHUA,AENA,AENA,ACHA,AFMA;AHUA,AENA,AENA,ACHA,AFMA;AHUA,AENA,AENA,ACHA,AFMA;AHUA,AENA,AENA,ACHA,AFMA;AHUA,AENA,AENA,ACHA,AFMA;AHUA,AENA,AENA,ACHA,AFMA;AHUA,AENA,AENA,ACHA,AFMA;AHUA,AENA,AENA,ACHA,AFMA;AHUA,AENA,AENA,ACHA,AFMA;AHUA,AENA,AENA,ACHA,AFMA;AHUA,AENA,AENA,ACHA,AFMA;AHUA,AENA,AENA,ACHA,AFMA;AHUA,AENA,AENA,ACHA,AFMA;AHUA,AENA,AENA,ACHA,AFMA;AHUA,AENA,AENA,ACHA,AFMA;AHUA,AENA,AENA,ACHA,AFMA;AHUA,AENA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ACHA,AFMA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,AENA,ADGA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["module.exports = {\r\n    aes : require(\"./aes\"),\r\n    qrcode: require(\"./qrcode\"),\r\n    util: require(\"./util\"),\r\n    request: require(\"./request\"),\r\n    token: require(\"./token\")\r\n}\r\n\r\n/*var getKey = function (){\r\n    return \"sssssssssssssssssssssssssssss\";\r\n}\r\nlet encryptResult = module.exports.aes.encrypt(\"hellochl\", getKey);\r\nconsole.log(\"encryptResult \" + encryptResult)*/\r\n\r\n//console.log(module.exports.util.stringUtil.isEmpty(\"\"))\r\n\r\n/*\r\nvar param = {\r\n    a: 1,\r\n    z: 2,\r\n    d: \"d\",\r\n    azd: 12\r\n}\r\nlet dealParamsResult = module.exports.request.dealParams(\"/xxx.json\", param);\r\nconsole.log(dealParamsResult)*/\r\n\r\n","const CryptoJS = require(\"./crypto/4mini/aes.js\")\r\n\r\n/*需要调用者提供getKey方法*/\r\nvar getKey = function(){\r\n  var temp = \"signsignsignsign\"\r\n  var appId = getApp().globalData.appId\r\n  appId = appId.length >= 16 ? appId.substring(0, 16) : appId + temp.substring(0, 16 - appId.length)\r\n  var shopId = getApp().globalData.shopId + \"\"\r\n  shopId = shopId.length >= 16 ? shopId.substring(0, 16) : shopId + temp.substring(0, 16 - shopId.length)\r\n  var key = appId.concat(shopId)\r\n  return key\r\n}\r\n\r\nvar getIv = function(key){\r\n  var iv = key.substring(0, 16)\r\n  return iv\r\n}\r\n\r\nvar encrypt = function (_content/*, _getKey*/) {\r\n  var _key = getKey()\r\n  var _iv = getIv(_key)\r\n  // 先以 UTF-8 编码解码参数 返回 any 类型\r\n  let content = CryptoJS.enc.Utf8.parse(_content);\r\n  let aesKey = CryptoJS.enc.Utf8.parse(_key);\r\n  let iv = CryptoJS.enc.Utf8.parse(_iv);\r\n\r\n  // 加密\r\n  let encrypted = CryptoJS.AES.encrypt(content, aesKey, {\r\n    iv: iv,\r\n    mode: CryptoJS.mode.CBC,\r\n    padding: CryptoJS.pad.Pkcs7\r\n  })\r\n\r\n  return CryptoJS.enc.Base64.stringify(encrypted.ciphertext);\r\n}\r\n\r\n// 测试解密失败\r\nvar decrypt = function (_content/*, getKey*/) {\r\n  var _key = getKey()\r\n  var _iv = getIv(_key)\r\n\r\n  let aesKey = CryptoJS.enc.Utf8.parse(_key);\r\n  let iv = CryptoJS.enc.Utf8.parse(_iv);\r\n\r\n  // 解密\r\n  let decrypted = CryptoJS.AES.decrypt(_content, aesKey, {\r\n    iv: iv,\r\n    mode: CryptoJS.mode.CBC,\r\n    padding: CryptoJS.pad.Pkcs7\r\n  })\r\n\r\n  return decrypted.toString(CryptoJS.enc.Utf8);\r\n}\r\n\r\nmodule.exports = {\r\n  encrypt: encrypt,\r\n  decrypt: decrypt\r\n}","/*\r\nCryptoJS v3.1.2\r\ncode.google.com/p/crypto-js\r\n(c) 2009-2013 by Jeff Mott. All rights reserved.\r\ncode.google.com/p/crypto-js/wiki/License\r\n*/\r\nvar CryptoJS=CryptoJS||function(u,p){var d={},l=d.lib={},s=function(){},t=l.Base={extend:function(a){s.prototype=this;var c=new s;a&&c.mixIn(a);c.hasOwnProperty(\"init\")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty(\"toString\")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},\r\nr=l.WordArray=t.extend({init:function(a,c){a=this.words=a||[];this.sigBytes=c!=p?c:4*a.length},toString:function(a){return(a||v).stringify(this)},concat:function(a){var c=this.words,e=a.words,j=this.sigBytes;a=a.sigBytes;this.clamp();if(j%4)for(var k=0;k<a;k++)c[j+k>>>2]|=(e[k>>>2]>>>24-8*(k%4)&255)<<24-8*((j+k)%4);else if(65535<e.length)for(k=0;k<a;k+=4)c[j+k>>>2]=e[k>>>2];else c.push.apply(c,e);this.sigBytes+=a;return this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<\r\n32-8*(c%4);a.length=u.ceil(c/4)},clone:function(){var a=t.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var c=[],e=0;e<a;e+=4)c.push(4294967296*u.random()|0);return new r.init(c,a)}}),w=d.enc={},v=w.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var e=[],j=0;j<a;j++){var k=c[j>>>2]>>>24-8*(j%4)&255;e.push((k>>>4).toString(16));e.push((k&15).toString(16))}return e.join(\"\")},parse:function(a){for(var c=a.length,e=[],j=0;j<c;j+=2)e[j>>>3]|=parseInt(a.substr(j,\r\n2),16)<<24-4*(j%8);return new r.init(e,c/2)}},b=w.Latin1={stringify:function(a){var c=a.words;a=a.sigBytes;for(var e=[],j=0;j<a;j++)e.push(String.fromCharCode(c[j>>>2]>>>24-8*(j%4)&255));return e.join(\"\")},parse:function(a){for(var c=a.length,e=[],j=0;j<c;j++)e[j>>>2]|=(a.charCodeAt(j)&255)<<24-8*(j%4);return new r.init(e,c)}},x=w.Utf8={stringify:function(a){try{return decodeURIComponent(escape(b.stringify(a)))}catch(c){throw Error(\"Malformed UTF-8 data\");}},parse:function(a){return b.parse(unescape(encodeURIComponent(a)))}},\r\nq=l.BufferedBlockAlgorithm=t.extend({reset:function(){this._data=new r.init;this._nDataBytes=0},_append:function(a){\"string\"==typeof a&&(a=x.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var c=this._data,e=c.words,j=c.sigBytes,k=this.blockSize,b=j/(4*k),b=a?u.ceil(b):u.max((b|0)-this._minBufferSize,0);a=b*k;j=u.min(4*a,j);if(a){for(var q=0;q<a;q+=k)this._doProcessBlock(e,q);q=e.splice(0,a);c.sigBytes-=j}return new r.init(q,j)},clone:function(){var a=t.clone.call(this);\r\na._data=this._data.clone();return a},_minBufferSize:0});l.Hasher=q.extend({cfg:t.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){q.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,e){return(new a.init(e)).finalize(b)}},_createHmacHelper:function(a){return function(b,e){return(new n.HMAC.init(a,\r\ne)).finalize(b)}}});var n=d.algo={};return d}(Math);\r\n(function(){var u=CryptoJS,p=u.lib.WordArray;u.enc.Base64={stringify:function(d){var l=d.words,p=d.sigBytes,t=this._map;d.clamp();d=[];for(var r=0;r<p;r+=3)for(var w=(l[r>>>2]>>>24-8*(r%4)&255)<<16|(l[r+1>>>2]>>>24-8*((r+1)%4)&255)<<8|l[r+2>>>2]>>>24-8*((r+2)%4)&255,v=0;4>v&&r+0.75*v<p;v++)d.push(t.charAt(w>>>6*(3-v)&63));if(l=t.charAt(64))for(;d.length%4;)d.push(l);return d.join(\"\")},parse:function(d){var l=d.length,s=this._map,t=s.charAt(64);t&&(t=d.indexOf(t),-1!=t&&(l=t));for(var t=[],r=0,w=0;w<\r\nl;w++)if(w%4){var v=s.indexOf(d.charAt(w-1))<<2*(w%4),b=s.indexOf(d.charAt(w))>>>6-2*(w%4);t[r>>>2]|=(v|b)<<24-8*(r%4);r++}return p.create(t,r)},_map:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\"}})();\r\n(function(u){function p(b,n,a,c,e,j,k){b=b+(n&a|~n&c)+e+k;return(b<<j|b>>>32-j)+n}function d(b,n,a,c,e,j,k){b=b+(n&c|a&~c)+e+k;return(b<<j|b>>>32-j)+n}function l(b,n,a,c,e,j,k){b=b+(n^a^c)+e+k;return(b<<j|b>>>32-j)+n}function s(b,n,a,c,e,j,k){b=b+(a^(n|~c))+e+k;return(b<<j|b>>>32-j)+n}for(var t=CryptoJS,r=t.lib,w=r.WordArray,v=r.Hasher,r=t.algo,b=[],x=0;64>x;x++)b[x]=4294967296*u.abs(u.sin(x+1))|0;r=r.MD5=v.extend({_doReset:function(){this._hash=new w.init([1732584193,4023233417,2562383102,271733878])},\r\n_doProcessBlock:function(q,n){for(var a=0;16>a;a++){var c=n+a,e=q[c];q[c]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360}var a=this._hash.words,c=q[n+0],e=q[n+1],j=q[n+2],k=q[n+3],z=q[n+4],r=q[n+5],t=q[n+6],w=q[n+7],v=q[n+8],A=q[n+9],B=q[n+10],C=q[n+11],u=q[n+12],D=q[n+13],E=q[n+14],x=q[n+15],f=a[0],m=a[1],g=a[2],h=a[3],f=p(f,m,g,h,c,7,b[0]),h=p(h,f,m,g,e,12,b[1]),g=p(g,h,f,m,j,17,b[2]),m=p(m,g,h,f,k,22,b[3]),f=p(f,m,g,h,z,7,b[4]),h=p(h,f,m,g,r,12,b[5]),g=p(g,h,f,m,t,17,b[6]),m=p(m,g,h,f,w,22,b[7]),\r\nf=p(f,m,g,h,v,7,b[8]),h=p(h,f,m,g,A,12,b[9]),g=p(g,h,f,m,B,17,b[10]),m=p(m,g,h,f,C,22,b[11]),f=p(f,m,g,h,u,7,b[12]),h=p(h,f,m,g,D,12,b[13]),g=p(g,h,f,m,E,17,b[14]),m=p(m,g,h,f,x,22,b[15]),f=d(f,m,g,h,e,5,b[16]),h=d(h,f,m,g,t,9,b[17]),g=d(g,h,f,m,C,14,b[18]),m=d(m,g,h,f,c,20,b[19]),f=d(f,m,g,h,r,5,b[20]),h=d(h,f,m,g,B,9,b[21]),g=d(g,h,f,m,x,14,b[22]),m=d(m,g,h,f,z,20,b[23]),f=d(f,m,g,h,A,5,b[24]),h=d(h,f,m,g,E,9,b[25]),g=d(g,h,f,m,k,14,b[26]),m=d(m,g,h,f,v,20,b[27]),f=d(f,m,g,h,D,5,b[28]),h=d(h,f,\r\nm,g,j,9,b[29]),g=d(g,h,f,m,w,14,b[30]),m=d(m,g,h,f,u,20,b[31]),f=l(f,m,g,h,r,4,b[32]),h=l(h,f,m,g,v,11,b[33]),g=l(g,h,f,m,C,16,b[34]),m=l(m,g,h,f,E,23,b[35]),f=l(f,m,g,h,e,4,b[36]),h=l(h,f,m,g,z,11,b[37]),g=l(g,h,f,m,w,16,b[38]),m=l(m,g,h,f,B,23,b[39]),f=l(f,m,g,h,D,4,b[40]),h=l(h,f,m,g,c,11,b[41]),g=l(g,h,f,m,k,16,b[42]),m=l(m,g,h,f,t,23,b[43]),f=l(f,m,g,h,A,4,b[44]),h=l(h,f,m,g,u,11,b[45]),g=l(g,h,f,m,x,16,b[46]),m=l(m,g,h,f,j,23,b[47]),f=s(f,m,g,h,c,6,b[48]),h=s(h,f,m,g,w,10,b[49]),g=s(g,h,f,m,\r\nE,15,b[50]),m=s(m,g,h,f,r,21,b[51]),f=s(f,m,g,h,u,6,b[52]),h=s(h,f,m,g,k,10,b[53]),g=s(g,h,f,m,B,15,b[54]),m=s(m,g,h,f,e,21,b[55]),f=s(f,m,g,h,v,6,b[56]),h=s(h,f,m,g,x,10,b[57]),g=s(g,h,f,m,t,15,b[58]),m=s(m,g,h,f,D,21,b[59]),f=s(f,m,g,h,z,6,b[60]),h=s(h,f,m,g,C,10,b[61]),g=s(g,h,f,m,j,15,b[62]),m=s(m,g,h,f,A,21,b[63]);a[0]=a[0]+f|0;a[1]=a[1]+m|0;a[2]=a[2]+g|0;a[3]=a[3]+h|0},_doFinalize:function(){var b=this._data,n=b.words,a=8*this._nDataBytes,c=8*b.sigBytes;n[c>>>5]|=128<<24-c%32;var e=u.floor(a/\r\n4294967296);n[(c+64>>>9<<4)+15]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360;n[(c+64>>>9<<4)+14]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360;b.sigBytes=4*(n.length+1);this._process();b=this._hash;n=b.words;for(a=0;4>a;a++)c=n[a],n[a]=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360;return b},clone:function(){var b=v.clone.call(this);b._hash=this._hash.clone();return b}});t.MD5=v._createHelper(r);t.HmacMD5=v._createHmacHelper(r)})(Math);\r\n(function(){var u=CryptoJS,p=u.lib,d=p.Base,l=p.WordArray,p=u.algo,s=p.EvpKDF=d.extend({cfg:d.extend({keySize:4,hasher:p.MD5,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,r){for(var p=this.cfg,s=p.hasher.create(),b=l.create(),u=b.words,q=p.keySize,p=p.iterations;u.length<q;){n&&s.update(n);var n=s.update(d).finalize(r);s.reset();for(var a=1;a<p;a++)n=s.finalize(n),s.reset();b.concat(n)}b.sigBytes=4*q;return b}});u.EvpKDF=function(d,l,p){return s.create(p).compute(d,\r\nl)}})();\r\nCryptoJS.lib.Cipher||function(u){var p=CryptoJS,d=p.lib,l=d.Base,s=d.WordArray,t=d.BufferedBlockAlgorithm,r=p.enc.Base64,w=p.algo.EvpKDF,v=d.Cipher=t.extend({cfg:l.extend(),createEncryptor:function(e,a){return this.create(this._ENC_XFORM_MODE,e,a)},createDecryptor:function(e,a){return this.create(this._DEC_XFORM_MODE,e,a)},init:function(e,a,b){this.cfg=this.cfg.extend(b);this._xformMode=e;this._key=a;this.reset()},reset:function(){t.reset.call(this);this._doReset()},process:function(e){this._append(e);return this._process()},\r\nfinalize:function(e){e&&this._append(e);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(b,k,d){return(\"string\"==typeof k?c:a).encrypt(e,b,k,d)},decrypt:function(b,k,d){return(\"string\"==typeof k?c:a).decrypt(e,b,k,d)}}}});d.StreamCipher=v.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var b=p.mode={},x=function(e,a,b){var c=this._iv;c?this._iv=u:c=this._prevBlock;for(var d=0;d<b;d++)e[a+d]^=\r\nc[d]},q=(d.BlockCipherMode=l.extend({createEncryptor:function(e,a){return this.Encryptor.create(e,a)},createDecryptor:function(e,a){return this.Decryptor.create(e,a)},init:function(e,a){this._cipher=e;this._iv=a}})).extend();q.Encryptor=q.extend({processBlock:function(e,a){var b=this._cipher,c=b.blockSize;x.call(this,e,a,c);b.encryptBlock(e,a);this._prevBlock=e.slice(a,a+c)}});q.Decryptor=q.extend({processBlock:function(e,a){var b=this._cipher,c=b.blockSize,d=e.slice(a,a+c);b.decryptBlock(e,a);x.call(this,\r\ne,a,c);this._prevBlock=d}});b=b.CBC=q;q=(p.pad={}).Pkcs7={pad:function(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,l=[],n=0;n<c;n+=4)l.push(d);c=s.create(l,c);a.concat(c)},unpad:function(a){a.sigBytes-=a.words[a.sigBytes-1>>>2]&255}};d.BlockCipher=v.extend({cfg:v.cfg.extend({mode:b,padding:q}),reset:function(){v.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,\r\nthis,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var n=d.CipherParams=l.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),b=(p.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;a=a.salt;return(a?s.create([1398893684,\r\n1701076831]).concat(a).concat(b):b).toString(r)},parse:function(a){a=r.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=s.create(b.slice(2,4));b.splice(0,4);a.sigBytes-=16}return n.create({ciphertext:a,salt:c})}},a=d.SerializableCipher=l.extend({cfg:l.extend({format:b}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var l=a.createEncryptor(c,d);b=l.finalize(b);l=l.cfg;return n.create({ciphertext:b,key:c,iv:l.iv,algorithm:a,mode:l.mode,padding:l.padding,blockSize:a.blockSize,formatter:d.format})},\r\ndecrypt:function(a,b,c,d){d=this.cfg.extend(d);b=this._parse(b,d.format);return a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function(a,b){return\"string\"==typeof a?b.parse(a,this):a}}),p=(p.kdf={}).OpenSSL={execute:function(a,b,c,d){d||(d=s.random(8));a=w.create({keySize:b+c}).compute(a,d);c=s.create(a.words.slice(b),4*c);a.sigBytes=4*b;return n.create({key:a,iv:c,salt:d})}},c=d.PasswordBasedCipher=a.extend({cfg:a.cfg.extend({kdf:p}),encrypt:function(b,c,d,l){l=this.cfg.extend(l);d=l.kdf.execute(d,\r\nb.keySize,b.ivSize);l.iv=d.iv;b=a.encrypt.call(this,b,c,d.key,l);b.mixIn(d);return b},decrypt:function(b,c,d,l){l=this.cfg.extend(l);c=this._parse(c,l.format);d=l.kdf.execute(d,b.keySize,b.ivSize,c.salt);l.iv=d.iv;return a.decrypt.call(this,b,c,d.key,l)}})}();\r\n(function(){for(var u=CryptoJS,p=u.lib.BlockCipher,d=u.algo,l=[],s=[],t=[],r=[],w=[],v=[],b=[],x=[],q=[],n=[],a=[],c=0;256>c;c++)a[c]=128>c?c<<1:c<<1^283;for(var e=0,j=0,c=0;256>c;c++){var k=j^j<<1^j<<2^j<<3^j<<4,k=k>>>8^k&255^99;l[e]=k;s[k]=e;var z=a[e],F=a[z],G=a[F],y=257*a[k]^16843008*k;t[e]=y<<24|y>>>8;r[e]=y<<16|y>>>16;w[e]=y<<8|y>>>24;v[e]=y;y=16843009*G^65537*F^257*z^16843008*e;b[k]=y<<24|y>>>8;x[k]=y<<16|y>>>16;q[k]=y<<8|y>>>24;n[k]=y;e?(e=z^a[a[a[G^z]]],j^=a[a[j]]):e=j=1}var H=[0,1,2,4,8,\r\n16,32,64,128,27,54],d=d.AES=p.extend({_doReset:function(){for(var a=this._key,c=a.words,d=a.sigBytes/4,a=4*((this._nRounds=d+6)+1),e=this._keySchedule=[],j=0;j<a;j++)if(j<d)e[j]=c[j];else{var k=e[j-1];j%d?6<d&&4==j%d&&(k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255]):(k=k<<8|k>>>24,k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255],k^=H[j/d|0]<<24);e[j]=e[j-d]^k}c=this._invKeySchedule=[];for(d=0;d<a;d++)j=a-d,k=d%4?e[j]:e[j-4],c[d]=4>d||4>=j?k:b[l[k>>>24]]^x[l[k>>>16&255]]^q[l[k>>>\r\n8&255]]^n[l[k&255]]},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,t,r,w,v,l)},decryptBlock:function(a,c){var d=a[c+1];a[c+1]=a[c+3];a[c+3]=d;this._doCryptBlock(a,c,this._invKeySchedule,b,x,q,n,s);d=a[c+1];a[c+1]=a[c+3];a[c+3]=d},_doCryptBlock:function(a,b,c,d,e,j,l,f){for(var m=this._nRounds,g=a[b]^c[0],h=a[b+1]^c[1],k=a[b+2]^c[2],n=a[b+3]^c[3],p=4,r=1;r<m;r++)var q=d[g>>>24]^e[h>>>16&255]^j[k>>>8&255]^l[n&255]^c[p++],s=d[h>>>24]^e[k>>>16&255]^j[n>>>8&255]^l[g&255]^c[p++],t=\r\nd[k>>>24]^e[n>>>16&255]^j[g>>>8&255]^l[h&255]^c[p++],n=d[n>>>24]^e[g>>>16&255]^j[h>>>8&255]^l[k&255]^c[p++],g=q,h=s,k=t;q=(f[g>>>24]<<24|f[h>>>16&255]<<16|f[k>>>8&255]<<8|f[n&255])^c[p++];s=(f[h>>>24]<<24|f[k>>>16&255]<<16|f[n>>>8&255]<<8|f[g&255])^c[p++];t=(f[k>>>24]<<24|f[n>>>16&255]<<16|f[g>>>8&255]<<8|f[h&255])^c[p++];n=(f[n>>>24]<<24|f[g>>>16&255]<<16|f[h>>>8&255]<<8|f[k&255])^c[p++];a[b]=q;a[b+1]=s;a[b+2]=t;a[b+3]=n},keySize:8});u.AES=p._createHelper(d)})();\r\n\r\nmodule.exports = CryptoJS","// Core code comes from https://github.com/davidshimjs/qrcodejs\r\nvar QRCode;\r\n\r\n(function () {\r\n    /**\r\n         * Get the type by string length\r\n         * \r\n         * @private\r\n         * @param {String} sText\r\n         * @param {Number} nCorrectLevel\r\n         * @return {Number} type\r\n         */\r\n    function _getTypeNumber(sText, nCorrectLevel) {\r\n        var nType = 1;\r\n        var length = _getUTF8Length(sText);\r\n\r\n        for (var i = 0, len = QRCodeLimitLength.length; i <= len; i++) {\r\n            var nLimit = 0;\r\n\r\n            switch (nCorrectLevel) {\r\n                case QRErrorCorrectLevel.L:\r\n                    nLimit = QRCodeLimitLength[i][0];\r\n                    break;\r\n                case QRErrorCorrectLevel.M:\r\n                    nLimit = QRCodeLimitLength[i][1];\r\n                    break;\r\n                case QRErrorCorrectLevel.Q:\r\n                    nLimit = QRCodeLimitLength[i][2];\r\n                    break;\r\n                case QRErrorCorrectLevel.H:\r\n                    nLimit = QRCodeLimitLength[i][3];\r\n                    break;\r\n            }\r\n\r\n            if (length <= nLimit) {\r\n                break;\r\n            } else {\r\n                nType++;\r\n            }\r\n        }\r\n\r\n        if (nType > QRCodeLimitLength.length) {\r\n            throw new Error(\"Too long data\");\r\n        }\r\n\r\n        return nType;\r\n    }\r\n\r\n    function _getUTF8Length(sText) {\r\n        var replacedText = encodeURI(sText).toString().replace(/\\%[0-9a-fA-F]{2}/g, 'a');\r\n        return replacedText.length + (replacedText.length != sText ? 3 : 0);\r\n    }\r\n\r\n    function QR8bitByte(data) {\r\n        this.mode = QRMode.MODE_8BIT_BYTE;\r\n        this.data = data;\r\n        this.parsedData = [];\r\n\r\n        // Added to support UTF-8 Characters\r\n        for (var i = 0, l = this.data.length; i < l; i++) {\r\n            var byteArray = [];\r\n            var code = this.data.charCodeAt(i);\r\n\r\n            if (code > 0x10000) {\r\n                byteArray[0] = 0xF0 | ((code & 0x1C0000) >>> 18);\r\n                byteArray[1] = 0x80 | ((code & 0x3F000) >>> 12);\r\n                byteArray[2] = 0x80 | ((code & 0xFC0) >>> 6);\r\n                byteArray[3] = 0x80 | (code & 0x3F);\r\n            } else if (code > 0x800) {\r\n                byteArray[0] = 0xE0 | ((code & 0xF000) >>> 12);\r\n                byteArray[1] = 0x80 | ((code & 0xFC0) >>> 6);\r\n                byteArray[2] = 0x80 | (code & 0x3F);\r\n            } else if (code > 0x80) {\r\n                byteArray[0] = 0xC0 | ((code & 0x7C0) >>> 6);\r\n                byteArray[1] = 0x80 | (code & 0x3F);\r\n            } else {\r\n                byteArray[0] = code;\r\n            }\r\n\r\n            this.parsedData.push(byteArray);\r\n        }\r\n\r\n        this.parsedData = Array.prototype.concat.apply([], this.parsedData);\r\n\r\n        if (this.parsedData.length != this.data.length) {\r\n            this.parsedData.unshift(191);\r\n            this.parsedData.unshift(187);\r\n            this.parsedData.unshift(239);\r\n        }\r\n    }\r\n\r\n    QR8bitByte.prototype = {\r\n        getLength: function (buffer) {\r\n            return this.parsedData.length;\r\n        },\r\n        write: function (buffer) {\r\n            for (var i = 0, l = this.parsedData.length; i < l; i++) {\r\n                buffer.put(this.parsedData[i], 8);\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    // QRCodeModel\r\n    function QRCodeModel(typeNumber, errorCorrectLevel) {\r\n        this.typeNumber = typeNumber;\r\n        this.errorCorrectLevel = errorCorrectLevel;\r\n        this.modules = null;\r\n        this.moduleCount = 0;\r\n        this.dataCache = null;\r\n        this.dataList = [];\r\n    }\r\n    QRCodeModel.prototype = {\r\n        addData: function (data) { var newData = new QR8bitByte(data); this.dataList.push(newData); this.dataCache = null; }, isDark: function (row, col) {\r\n            if (row < 0 || this.moduleCount <= row || col < 0 || this.moduleCount <= col) { throw new Error(row + \",\" + col); }\r\n            return this.modules[row][col];\r\n        }, getModuleCount: function () { return this.moduleCount; }, make: function () { this.makeImpl(false, this.getBestMaskPattern()); }, makeImpl: function (test, maskPattern) {\r\n            this.moduleCount = this.typeNumber * 4 + 17; this.modules = new Array(this.moduleCount); for (var row = 0; row < this.moduleCount; row++) { this.modules[row] = new Array(this.moduleCount); for (var col = 0; col < this.moduleCount; col++) { this.modules[row][col] = null; } }\r\n            this.setupPositionProbePattern(0, 0); this.setupPositionProbePattern(this.moduleCount - 7, 0); this.setupPositionProbePattern(0, this.moduleCount - 7); this.setupPositionAdjustPattern(); this.setupTimingPattern(); this.setupTypeInfo(test, maskPattern); if (this.typeNumber >= 7) { this.setupTypeNumber(test); }\r\n            if (this.dataCache == null) { this.dataCache = QRCodeModel.createData(this.typeNumber, this.errorCorrectLevel, this.dataList); }\r\n            this.mapData(this.dataCache, maskPattern);\r\n        }, setupPositionProbePattern: function (row, col) { for (var r = -1; r <= 7; r++) { if (row + r <= -1 || this.moduleCount <= row + r) continue; for (var c = -1; c <= 7; c++) { if (col + c <= -1 || this.moduleCount <= col + c) continue; if ((0 <= r && r <= 6 && (c == 0 || c == 6)) || (0 <= c && c <= 6 && (r == 0 || r == 6)) || (2 <= r && r <= 4 && 2 <= c && c <= 4)) { this.modules[row + r][col + c] = true; } else { this.modules[row + r][col + c] = false; } } } }, getBestMaskPattern: function () {\r\n            var minLostPoint = 0; var pattern = 0; for (var i = 0; i < 8; i++) { this.makeImpl(true, i); var lostPoint = QRUtil.getLostPoint(this); if (i == 0 || minLostPoint > lostPoint) { minLostPoint = lostPoint; pattern = i; } }\r\n            return pattern;\r\n        }, createMovieClip: function (target_mc, instance_name, depth) {\r\n            var qr_mc = target_mc.createEmptyMovieClip(instance_name, depth); var cs = 1; this.make(); for (var row = 0; row < this.modules.length; row++) { var y = row * cs; for (var col = 0; col < this.modules[row].length; col++) { var x = col * cs; var dark = this.modules[row][col]; if (dark) { qr_mc.beginFill(0, 100); qr_mc.moveTo(x, y); qr_mc.lineTo(x + cs, y); qr_mc.lineTo(x + cs, y + cs); qr_mc.lineTo(x, y + cs); qr_mc.endFill(); } } }\r\n            return qr_mc;\r\n        }, setupTimingPattern: function () {\r\n            for (var r = 8; r < this.moduleCount - 8; r++) {\r\n                if (this.modules[r][6] != null) { continue; }\r\n                this.modules[r][6] = (r % 2 == 0);\r\n            }\r\n            for (var c = 8; c < this.moduleCount - 8; c++) {\r\n                if (this.modules[6][c] != null) { continue; }\r\n                this.modules[6][c] = (c % 2 == 0);\r\n            }\r\n        }, setupPositionAdjustPattern: function () {\r\n            var pos = QRUtil.getPatternPosition(this.typeNumber); for (var i = 0; i < pos.length; i++) {\r\n                for (var j = 0; j < pos.length; j++) {\r\n                    var row = pos[i]; var col = pos[j]; if (this.modules[row][col] != null) { continue; }\r\n                    for (var r = -2; r <= 2; r++) { for (var c = -2; c <= 2; c++) { if (r == -2 || r == 2 || c == -2 || c == 2 || (r == 0 && c == 0)) { this.modules[row + r][col + c] = true; } else { this.modules[row + r][col + c] = false; } } }\r\n                }\r\n            }\r\n        }, setupTypeNumber: function (test) {\r\n            var bits = QRUtil.getBCHTypeNumber(this.typeNumber); for (var i = 0; i < 18; i++) { var mod = (!test && ((bits >> i) & 1) == 1); this.modules[Math.floor(i / 3)][i % 3 + this.moduleCount - 8 - 3] = mod; }\r\n            for (var i = 0; i < 18; i++) { var mod = (!test && ((bits >> i) & 1) == 1); this.modules[i % 3 + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod; }\r\n        }, setupTypeInfo: function (test, maskPattern) {\r\n            var data = (this.errorCorrectLevel << 3) | maskPattern; var bits = QRUtil.getBCHTypeInfo(data); for (var i = 0; i < 15; i++) { var mod = (!test && ((bits >> i) & 1) == 1); if (i < 6) { this.modules[i][8] = mod; } else if (i < 8) { this.modules[i + 1][8] = mod; } else { this.modules[this.moduleCount - 15 + i][8] = mod; } }\r\n            for (var i = 0; i < 15; i++) { var mod = (!test && ((bits >> i) & 1) == 1); if (i < 8) { this.modules[8][this.moduleCount - i - 1] = mod; } else if (i < 9) { this.modules[8][15 - i - 1 + 1] = mod; } else { this.modules[8][15 - i - 1] = mod; } }\r\n            this.modules[this.moduleCount - 8][8] = (!test);\r\n        }, mapData: function (data, maskPattern) {\r\n            var inc = -1; var row = this.moduleCount - 1; var bitIndex = 7; var byteIndex = 0; for (var col = this.moduleCount - 1; col > 0; col -= 2) {\r\n                if (col == 6) col--; while (true) {\r\n                    for (var c = 0; c < 2; c++) {\r\n                        if (this.modules[row][col - c] == null) {\r\n                            var dark = false; if (byteIndex < data.length) { dark = (((data[byteIndex] >>> bitIndex) & 1) == 1); }\r\n                            var mask = QRUtil.getMask(maskPattern, row, col - c); if (mask) { dark = !dark; }\r\n                            this.modules[row][col - c] = dark; bitIndex--; if (bitIndex == -1) { byteIndex++; bitIndex = 7; }\r\n                        }\r\n                    }\r\n                    row += inc; if (row < 0 || this.moduleCount <= row) { row -= inc; inc = -inc; break; }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    QRCodeModel.PAD0 = 0xEC;\r\n    QRCodeModel.PAD1 = 0x11;\r\n    QRCodeModel.createData = function (typeNumber, errorCorrectLevel, dataList) {\r\n        var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectLevel); var buffer = new QRBitBuffer(); for (var i = 0; i < dataList.length; i++) { var data = dataList[i]; buffer.put(data.mode, 4); buffer.put(data.getLength(), QRUtil.getLengthInBits(data.mode, typeNumber)); data.write(buffer); }\r\n        var totalDataCount = 0; for (var i = 0; i < rsBlocks.length; i++) { totalDataCount += rsBlocks[i].dataCount; }\r\n        if (buffer.getLengthInBits() > totalDataCount * 8) {\r\n            throw new Error(\"code length overflow. (\"\r\n                + buffer.getLengthInBits()\r\n                + \">\"\r\n                + totalDataCount * 8\r\n                + \")\");\r\n        }\r\n        if (buffer.getLengthInBits() + 4 <= totalDataCount * 8) { buffer.put(0, 4); }\r\n        while (buffer.getLengthInBits() % 8 != 0) { buffer.putBit(false); }\r\n        while (true) {\r\n            if (buffer.getLengthInBits() >= totalDataCount * 8) { break; }\r\n            buffer.put(QRCodeModel.PAD0, 8); if (buffer.getLengthInBits() >= totalDataCount * 8) { break; }\r\n            buffer.put(QRCodeModel.PAD1, 8);\r\n        }\r\n        return QRCodeModel.createBytes(buffer, rsBlocks);\r\n    };\r\n    QRCodeModel.createBytes = function (buffer, rsBlocks) {\r\n        var offset = 0; var maxDcCount = 0; var maxEcCount = 0; var dcdata = new Array(rsBlocks.length); var ecdata = new Array(rsBlocks.length); for (var r = 0; r < rsBlocks.length; r++) {\r\n            var dcCount = rsBlocks[r].dataCount; var ecCount = rsBlocks[r].totalCount - dcCount; maxDcCount = Math.max(maxDcCount, dcCount); maxEcCount = Math.max(maxEcCount, ecCount); dcdata[r] = new Array(dcCount); for (var i = 0; i < dcdata[r].length; i++) { dcdata[r][i] = 0xff & buffer.buffer[i + offset]; }\r\n            offset += dcCount; var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount); var rawPoly = new QRPolynomial(dcdata[r], rsPoly.getLength() - 1); var modPoly = rawPoly.mod(rsPoly); ecdata[r] = new Array(rsPoly.getLength() - 1); for (var i = 0; i < ecdata[r].length; i++) { var modIndex = i + modPoly.getLength() - ecdata[r].length; ecdata[r][i] = (modIndex >= 0) ? modPoly.get(modIndex) : 0; }\r\n        }\r\n        var totalCodeCount = 0; for (var i = 0; i < rsBlocks.length; i++) { totalCodeCount += rsBlocks[i].totalCount; }\r\n        var data = new Array(totalCodeCount); var index = 0; for (var i = 0; i < maxDcCount; i++) { for (var r = 0; r < rsBlocks.length; r++) { if (i < dcdata[r].length) { data[index++] = dcdata[r][i]; } } }\r\n        for (var i = 0; i < maxEcCount; i++) { for (var r = 0; r < rsBlocks.length; r++) { if (i < ecdata[r].length) { data[index++] = ecdata[r][i]; } } }\r\n        return data;\r\n    };\r\n    var QRMode = { MODE_NUMBER: 1 << 0, MODE_ALPHA_NUM: 1 << 1, MODE_8BIT_BYTE: 1 << 2, MODE_KANJI: 1 << 3 };\r\n    var QRErrorCorrectLevel = { L: 1, M: 0, Q: 3, H: 2 };\r\n    var QRMaskPattern = { PATTERN000: 0, PATTERN001: 1, PATTERN010: 2, PATTERN011: 3, PATTERN100: 4, PATTERN101: 5, PATTERN110: 6, PATTERN111: 7 };\r\n    var QRUtil = {\r\n        PATTERN_POSITION_TABLE: [[], [6, 18], [6, 22], [6, 26], [6, 30], [6, 34], [6, 22, 38], [6, 24, 42], [6, 26, 46], [6, 28, 50], [6, 30, 54], [6, 32, 58], [6, 34, 62], [6, 26, 46, 66], [6, 26, 48, 70], [6, 26, 50, 74], [6, 30, 54, 78], [6, 30, 56, 82], [6, 30, 58, 86], [6, 34, 62, 90], [6, 28, 50, 72, 94], [6, 26, 50, 74, 98], [6, 30, 54, 78, 102], [6, 28, 54, 80, 106], [6, 32, 58, 84, 110], [6, 30, 58, 86, 114], [6, 34, 62, 90, 118], [6, 26, 50, 74, 98, 122], [6, 30, 54, 78, 102, 126], [6, 26, 52, 78, 104, 130], [6, 30, 56, 82, 108, 134], [6, 34, 60, 86, 112, 138], [6, 30, 58, 86, 114, 142], [6, 34, 62, 90, 118, 146], [6, 30, 54, 78, 102, 126, 150], [6, 24, 50, 76, 102, 128, 154], [6, 28, 54, 80, 106, 132, 158], [6, 32, 58, 84, 110, 136, 162], [6, 26, 54, 82, 110, 138, 166], [6, 30, 58, 86, 114, 142, 170]], G15: (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0), G18: (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0), G15_MASK: (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1), getBCHTypeInfo: function (data) {\r\n            var d = data << 10; while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) { d ^= (QRUtil.G15 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15))); }\r\n            return ((data << 10) | d) ^ QRUtil.G15_MASK;\r\n        }, getBCHTypeNumber: function (data) {\r\n            var d = data << 12; while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) { d ^= (QRUtil.G18 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18))); }\r\n            return (data << 12) | d;\r\n        }, getBCHDigit: function (data) {\r\n            var digit = 0; while (data != 0) { digit++; data >>>= 1; }\r\n            return digit;\r\n        }, getPatternPosition: function (typeNumber) { return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1]; }, getMask: function (maskPattern, i, j) { switch (maskPattern) { case QRMaskPattern.PATTERN000: return (i + j) % 2 == 0; case QRMaskPattern.PATTERN001: return i % 2 == 0; case QRMaskPattern.PATTERN010: return j % 3 == 0; case QRMaskPattern.PATTERN011: return (i + j) % 3 == 0; case QRMaskPattern.PATTERN100: return (Math.floor(i / 2) + Math.floor(j / 3)) % 2 == 0; case QRMaskPattern.PATTERN101: return (i * j) % 2 + (i * j) % 3 == 0; case QRMaskPattern.PATTERN110: return ((i * j) % 2 + (i * j) % 3) % 2 == 0; case QRMaskPattern.PATTERN111: return ((i * j) % 3 + (i + j) % 2) % 2 == 0; default: throw new Error(\"bad maskPattern:\" + maskPattern); } }, getErrorCorrectPolynomial: function (errorCorrectLength) {\r\n            var a = new QRPolynomial([1], 0); for (var i = 0; i < errorCorrectLength; i++) { a = a.multiply(new QRPolynomial([1, QRMath.gexp(i)], 0)); }\r\n            return a;\r\n        }, getLengthInBits: function (mode, type) { if (1 <= type && type < 10) { switch (mode) { case QRMode.MODE_NUMBER: return 10; case QRMode.MODE_ALPHA_NUM: return 9; case QRMode.MODE_8BIT_BYTE: return 8; case QRMode.MODE_KANJI: return 8; default: throw new Error(\"mode:\" + mode); } } else if (type < 27) { switch (mode) { case QRMode.MODE_NUMBER: return 12; case QRMode.MODE_ALPHA_NUM: return 11; case QRMode.MODE_8BIT_BYTE: return 16; case QRMode.MODE_KANJI: return 10; default: throw new Error(\"mode:\" + mode); } } else if (type < 41) { switch (mode) { case QRMode.MODE_NUMBER: return 14; case QRMode.MODE_ALPHA_NUM: return 13; case QRMode.MODE_8BIT_BYTE: return 16; case QRMode.MODE_KANJI: return 12; default: throw new Error(\"mode:\" + mode); } } else { throw new Error(\"type:\" + type); } }, getLostPoint: function (qrCode) {\r\n            var moduleCount = qrCode.getModuleCount(); var lostPoint = 0; for (var row = 0; row < moduleCount; row++) {\r\n                for (var col = 0; col < moduleCount; col++) {\r\n                    var sameCount = 0; var dark = qrCode.isDark(row, col); for (var r = -1; r <= 1; r++) {\r\n                        if (row + r < 0 || moduleCount <= row + r) { continue; }\r\n                        for (var c = -1; c <= 1; c++) {\r\n                            if (col + c < 0 || moduleCount <= col + c) { continue; }\r\n                            if (r == 0 && c == 0) { continue; }\r\n                            if (dark == qrCode.isDark(row + r, col + c)) { sameCount++; }\r\n                        }\r\n                    }\r\n                    if (sameCount > 5) { lostPoint += (3 + sameCount - 5); }\r\n                }\r\n            }\r\n            for (var row = 0; row < moduleCount - 1; row++) { for (var col = 0; col < moduleCount - 1; col++) { var count = 0; if (qrCode.isDark(row, col)) count++; if (qrCode.isDark(row + 1, col)) count++; if (qrCode.isDark(row, col + 1)) count++; if (qrCode.isDark(row + 1, col + 1)) count++; if (count == 0 || count == 4) { lostPoint += 3; } } }\r\n            for (var row = 0; row < moduleCount; row++) { for (var col = 0; col < moduleCount - 6; col++) { if (qrCode.isDark(row, col) && !qrCode.isDark(row, col + 1) && qrCode.isDark(row, col + 2) && qrCode.isDark(row, col + 3) && qrCode.isDark(row, col + 4) && !qrCode.isDark(row, col + 5) && qrCode.isDark(row, col + 6)) { lostPoint += 40; } } }\r\n            for (var col = 0; col < moduleCount; col++) { for (var row = 0; row < moduleCount - 6; row++) { if (qrCode.isDark(row, col) && !qrCode.isDark(row + 1, col) && qrCode.isDark(row + 2, col) && qrCode.isDark(row + 3, col) && qrCode.isDark(row + 4, col) && !qrCode.isDark(row + 5, col) && qrCode.isDark(row + 6, col)) { lostPoint += 40; } } }\r\n            var darkCount = 0; for (var col = 0; col < moduleCount; col++) { for (var row = 0; row < moduleCount; row++) { if (qrCode.isDark(row, col)) { darkCount++; } } }\r\n            var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5; lostPoint += ratio * 10; return lostPoint;\r\n        }\r\n    };\r\n    var QRMath = {\r\n        glog: function (n) {\r\n            if (n < 1) { throw new Error(\"glog(\" + n + \")\"); }\r\n            return QRMath.LOG_TABLE[n];\r\n        }, gexp: function (n) {\r\n            while (n < 0) { n += 255; }\r\n            while (n >= 256) { n -= 255; }\r\n            return QRMath.EXP_TABLE[n];\r\n        }, EXP_TABLE: new Array(256), LOG_TABLE: new Array(256)\r\n    }; for (var i = 0; i < 8; i++) { QRMath.EXP_TABLE[i] = 1 << i; }\r\n    for (var i = 8; i < 256; i++) { QRMath.EXP_TABLE[i] = QRMath.EXP_TABLE[i - 4] ^ QRMath.EXP_TABLE[i - 5] ^ QRMath.EXP_TABLE[i - 6] ^ QRMath.EXP_TABLE[i - 8]; }\r\n    for (var i = 0; i < 255; i++) { QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]] = i; }\r\n    function QRPolynomial(num, shift) {\r\n        if (num.length == undefined) { throw new Error(num.length + \"/\" + shift); }\r\n        var offset = 0; while (offset < num.length && num[offset] == 0) { offset++; }\r\n        this.num = new Array(num.length - offset + shift); for (var i = 0; i < num.length - offset; i++) { this.num[i] = num[i + offset]; }\r\n    }\r\n    QRPolynomial.prototype = {\r\n        get: function (index) { return this.num[index]; }, getLength: function () { return this.num.length; }, multiply: function (e) {\r\n            var num = new Array(this.getLength() + e.getLength() - 1); for (var i = 0; i < this.getLength(); i++) { for (var j = 0; j < e.getLength(); j++) { num[i + j] ^= QRMath.gexp(QRMath.glog(this.get(i)) + QRMath.glog(e.get(j))); } }\r\n            return new QRPolynomial(num, 0);\r\n        }, mod: function (e) {\r\n            if (this.getLength() - e.getLength() < 0) { return this; }\r\n            var ratio = QRMath.glog(this.get(0)) - QRMath.glog(e.get(0)); var num = new Array(this.getLength()); for (var i = 0; i < this.getLength(); i++) { num[i] = this.get(i); }\r\n            for (var i = 0; i < e.getLength(); i++) { num[i] ^= QRMath.gexp(QRMath.glog(e.get(i)) + ratio); }\r\n            return new QRPolynomial(num, 0).mod(e);\r\n        }\r\n    };\r\n    function QRRSBlock(totalCount, dataCount) { this.totalCount = totalCount; this.dataCount = dataCount; }\r\n    QRRSBlock.RS_BLOCK_TABLE = [[1, 26, 19], [1, 26, 16], [1, 26, 13], [1, 26, 9], [1, 44, 34], [1, 44, 28], [1, 44, 22], [1, 44, 16], [1, 70, 55], [1, 70, 44], [2, 35, 17], [2, 35, 13], [1, 100, 80], [2, 50, 32], [2, 50, 24], [4, 25, 9], [1, 134, 108], [2, 67, 43], [2, 33, 15, 2, 34, 16], [2, 33, 11, 2, 34, 12], [2, 86, 68], [4, 43, 27], [4, 43, 19], [4, 43, 15], [2, 98, 78], [4, 49, 31], [2, 32, 14, 4, 33, 15], [4, 39, 13, 1, 40, 14], [2, 121, 97], [2, 60, 38, 2, 61, 39], [4, 40, 18, 2, 41, 19], [4, 40, 14, 2, 41, 15], [2, 146, 116], [3, 58, 36, 2, 59, 37], [4, 36, 16, 4, 37, 17], [4, 36, 12, 4, 37, 13], [2, 86, 68, 2, 87, 69], [4, 69, 43, 1, 70, 44], [6, 43, 19, 2, 44, 20], [6, 43, 15, 2, 44, 16], [4, 101, 81], [1, 80, 50, 4, 81, 51], [4, 50, 22, 4, 51, 23], [3, 36, 12, 8, 37, 13], [2, 116, 92, 2, 117, 93], [6, 58, 36, 2, 59, 37], [4, 46, 20, 6, 47, 21], [7, 42, 14, 4, 43, 15], [4, 133, 107], [8, 59, 37, 1, 60, 38], [8, 44, 20, 4, 45, 21], [12, 33, 11, 4, 34, 12], [3, 145, 115, 1, 146, 116], [4, 64, 40, 5, 65, 41], [11, 36, 16, 5, 37, 17], [11, 36, 12, 5, 37, 13], [5, 109, 87, 1, 110, 88], [5, 65, 41, 5, 66, 42], [5, 54, 24, 7, 55, 25], [11, 36, 12], [5, 122, 98, 1, 123, 99], [7, 73, 45, 3, 74, 46], [15, 43, 19, 2, 44, 20], [3, 45, 15, 13, 46, 16], [1, 135, 107, 5, 136, 108], [10, 74, 46, 1, 75, 47], [1, 50, 22, 15, 51, 23], [2, 42, 14, 17, 43, 15], [5, 150, 120, 1, 151, 121], [9, 69, 43, 4, 70, 44], [17, 50, 22, 1, 51, 23], [2, 42, 14, 19, 43, 15], [3, 141, 113, 4, 142, 114], [3, 70, 44, 11, 71, 45], [17, 47, 21, 4, 48, 22], [9, 39, 13, 16, 40, 14], [3, 135, 107, 5, 136, 108], [3, 67, 41, 13, 68, 42], [15, 54, 24, 5, 55, 25], [15, 43, 15, 10, 44, 16], [4, 144, 116, 4, 145, 117], [17, 68, 42], [17, 50, 22, 6, 51, 23], [19, 46, 16, 6, 47, 17], [2, 139, 111, 7, 140, 112], [17, 74, 46], [7, 54, 24, 16, 55, 25], [34, 37, 13], [4, 151, 121, 5, 152, 122], [4, 75, 47, 14, 76, 48], [11, 54, 24, 14, 55, 25], [16, 45, 15, 14, 46, 16], [6, 147, 117, 4, 148, 118], [6, 73, 45, 14, 74, 46], [11, 54, 24, 16, 55, 25], [30, 46, 16, 2, 47, 17], [8, 132, 106, 4, 133, 107], [8, 75, 47, 13, 76, 48], [7, 54, 24, 22, 55, 25], [22, 45, 15, 13, 46, 16], [10, 142, 114, 2, 143, 115], [19, 74, 46, 4, 75, 47], [28, 50, 22, 6, 51, 23], [33, 46, 16, 4, 47, 17], [8, 152, 122, 4, 153, 123], [22, 73, 45, 3, 74, 46], [8, 53, 23, 26, 54, 24], [12, 45, 15, 28, 46, 16], [3, 147, 117, 10, 148, 118], [3, 73, 45, 23, 74, 46], [4, 54, 24, 31, 55, 25], [11, 45, 15, 31, 46, 16], [7, 146, 116, 7, 147, 117], [21, 73, 45, 7, 74, 46], [1, 53, 23, 37, 54, 24], [19, 45, 15, 26, 46, 16], [5, 145, 115, 10, 146, 116], [19, 75, 47, 10, 76, 48], [15, 54, 24, 25, 55, 25], [23, 45, 15, 25, 46, 16], [13, 145, 115, 3, 146, 116], [2, 74, 46, 29, 75, 47], [42, 54, 24, 1, 55, 25], [23, 45, 15, 28, 46, 16], [17, 145, 115], [10, 74, 46, 23, 75, 47], [10, 54, 24, 35, 55, 25], [19, 45, 15, 35, 46, 16], [17, 145, 115, 1, 146, 116], [14, 74, 46, 21, 75, 47], [29, 54, 24, 19, 55, 25], [11, 45, 15, 46, 46, 16], [13, 145, 115, 6, 146, 116], [14, 74, 46, 23, 75, 47], [44, 54, 24, 7, 55, 25], [59, 46, 16, 1, 47, 17], [12, 151, 121, 7, 152, 122], [12, 75, 47, 26, 76, 48], [39, 54, 24, 14, 55, 25], [22, 45, 15, 41, 46, 16], [6, 151, 121, 14, 152, 122], [6, 75, 47, 34, 76, 48], [46, 54, 24, 10, 55, 25], [2, 45, 15, 64, 46, 16], [17, 152, 122, 4, 153, 123], [29, 74, 46, 14, 75, 47], [49, 54, 24, 10, 55, 25], [24, 45, 15, 46, 46, 16], [4, 152, 122, 18, 153, 123], [13, 74, 46, 32, 75, 47], [48, 54, 24, 14, 55, 25], [42, 45, 15, 32, 46, 16], [20, 147, 117, 4, 148, 118], [40, 75, 47, 7, 76, 48], [43, 54, 24, 22, 55, 25], [10, 45, 15, 67, 46, 16], [19, 148, 118, 6, 149, 119], [18, 75, 47, 31, 76, 48], [34, 54, 24, 34, 55, 25], [20, 45, 15, 61, 46, 16]];\r\n    QRRSBlock.getRSBlocks = function (typeNumber, errorCorrectLevel) {\r\n        var rsBlock = QRRSBlock.getRsBlockTable(typeNumber, errorCorrectLevel); if (rsBlock == undefined) { throw new Error(\"bad rs block @ typeNumber:\" + typeNumber + \"/errorCorrectLevel:\" + errorCorrectLevel); }\r\n        var length = rsBlock.length / 3; var list = []; for (var i = 0; i < length; i++) { var count = rsBlock[i * 3 + 0]; var totalCount = rsBlock[i * 3 + 1]; var dataCount = rsBlock[i * 3 + 2]; for (var j = 0; j < count; j++) { list.push(new QRRSBlock(totalCount, dataCount)); } }\r\n        return list;\r\n    };\r\n    QRRSBlock.getRsBlockTable = function (typeNumber, errorCorrectLevel) { switch (errorCorrectLevel) { case QRErrorCorrectLevel.L: return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0]; case QRErrorCorrectLevel.M: return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1]; case QRErrorCorrectLevel.Q: return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2]; case QRErrorCorrectLevel.H: return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3]; default: return undefined; } };\r\n    function QRBitBuffer() { this.buffer = []; this.length = 0; }\r\n    QRBitBuffer.prototype = {\r\n        get: function (index) { var bufIndex = Math.floor(index / 8); return ((this.buffer[bufIndex] >>> (7 - index % 8)) & 1) == 1; }, put: function (num, length) { for (var i = 0; i < length; i++) { this.putBit(((num >>> (length - i - 1)) & 1) == 1); } }, getLengthInBits: function () { return this.length; }, putBit: function (bit) {\r\n            var bufIndex = Math.floor(this.length / 8); if (this.buffer.length <= bufIndex) { this.buffer.push(0); }\r\n            if (bit) { this.buffer[bufIndex] |= (0x80 >>> (this.length % 8)); }\r\n            this.length++;\r\n        }\r\n    };\r\n    var QRCodeLimitLength = [[17, 14, 11, 7], [32, 26, 20, 14], [53, 42, 32, 24], [78, 62, 46, 34], [106, 84, 60, 44], [134, 106, 74, 58], [154, 122, 86, 64], [192, 152, 108, 84], [230, 180, 130, 98], [271, 213, 151, 119], [321, 251, 177, 137], [367, 287, 203, 155], [425, 331, 241, 177], [458, 362, 258, 194], [520, 412, 292, 220], [586, 450, 322, 250], [644, 504, 364, 280], [718, 560, 394, 310], [792, 624, 442, 338], [858, 666, 482, 382], [929, 711, 509, 403], [1003, 779, 565, 439], [1091, 857, 611, 461], [1171, 911, 661, 511], [1273, 997, 715, 535], [1367, 1059, 751, 593], [1465, 1125, 805, 625], [1528, 1190, 868, 658], [1628, 1264, 908, 698], [1732, 1370, 982, 742], [1840, 1452, 1030, 790], [1952, 1538, 1112, 842], [2068, 1628, 1168, 898], [2188, 1722, 1228, 958], [2303, 1809, 1283, 983], [2431, 1911, 1351, 1051], [2563, 1989, 1423, 1093], [2699, 2099, 1499, 1139], [2809, 2213, 1579, 1219], [2953, 2331, 1663, 1273]];\r\n\r\n    // QRCode object\r\n    QRCode = function (canvasId, vOption) {\r\n        this._htOption = {\r\n            width: 256,\r\n            height: 256,\r\n            typeNumber: 4,\r\n            colorDark: \"#000000\",\r\n            colorLight: \"#ffffff\",\r\n            correctLevel: QRErrorCorrectLevel.H\r\n        };\r\n\r\n        if (typeof vOption === 'string') {\r\n            vOption = {\r\n                text: vOption\r\n            };\r\n        }\r\n\r\n        // Overwrites options\r\n        if (vOption) {\r\n            for (var i in vOption) {\r\n                this._htOption[i] = vOption[i];\r\n            }\r\n        }\r\n\r\n        this._oQRCode = null;\r\n        this.canvasId = canvasId\r\n\r\n        if (this._htOption.text && this.canvasId) {\r\n            this.makeCode(this._htOption.text);\r\n        }\r\n    };\r\n\r\n    QRCode.prototype.makeCode = function (sText) {\r\n        this._oQRCode = new QRCodeModel(_getTypeNumber(sText, this._htOption.correctLevel), this._htOption.correctLevel);\r\n        this._oQRCode.addData(sText);\r\n        this._oQRCode.make();\r\n        this.makeImage();\r\n    };\r\n\r\n    QRCode.prototype.makeImage = function () {\r\n        var _oContext\r\n        if (this._htOption.usingIn) {\r\n            _oContext = wx.createCanvasContext(this.canvasId, this._htOption.usingIn)\r\n        }\r\n        else {\r\n            _oContext = wx.createCanvasContext(this.canvasId)\r\n        }\r\n        var _htOption = this._htOption;\r\n        var oQRCode = this._oQRCode\r\n\r\n        var nCount = oQRCode.getModuleCount();\r\n        var nWidth = _htOption.padding ? (_htOption.width - 2 * _htOption.padding) / nCount : _htOption.width / nCount;\r\n        var nHeight = _htOption.padding ? (_htOption.height - 2 * _htOption.padding) / nCount : _htOption.height / nCount;\r\n        var nRoundedHeight = Math.round(nHeight);\r\n        var nRoundedWidth = Math.round(nWidth);\r\n\r\n        if (_htOption.image && _htOption.image != '') {\r\n            _oContext.drawImage(_htOption.image, 0, 0, _htOption.width, _htOption.height)\r\n        }\r\n        _oContext.setFillStyle('#fff')\r\n        _oContext.fillRect(0, 0, _htOption.width, _htOption.height)\r\n        _oContext.save()\r\n        for (var row = 0; row < nCount; row++) {\r\n            for (var col = 0; col < nCount; col++) {\r\n                var bIsDark = oQRCode.isDark(row, col);\r\n                var nLeft = _htOption.padding ? col * nWidth + _htOption.padding : col * nWidth;\r\n                var nTop = _htOption.padding ? row * nHeight + _htOption.padding : row * nHeight;\r\n                _oContext.setStrokeStyle(bIsDark ? _htOption.colorDark : _htOption.colorLight)\r\n                // _oContext.setStrokeStyle('red')\r\n                _oContext.setLineWidth(1)\r\n                _oContext.setFillStyle(bIsDark ? _htOption.colorDark : _htOption.colorLight)\r\n                // _oContext.setFillStyle('red')\r\n                // if (bIsDark) {\r\n                _oContext.fillRect(nLeft, nTop, nWidth, nHeight);\r\n                // }\r\n\r\n                // 안티 앨리어싱 방지 처리\r\n                // if (bIsDark) {\r\n                _oContext.strokeRect(\r\n                    Math.floor(nLeft) + 0.5,\r\n                    Math.floor(nTop) + 0.5,\r\n                    nRoundedHeight\r\n                );\r\n\r\n                _oContext.strokeRect(\r\n                    Math.ceil(nLeft) - 0.5,\r\n                    Math.ceil(nTop) - 0.5,\r\n                    nRoundedWidth,\r\n                    nRoundedHeight\r\n                );\r\n                // }\r\n                // _oContext.fillRect(\r\n                //     Math.floor(nLeft) + 0.5,\r\n                //     Math.floor(nTop) + 0.5,\r\n                //     nRoundedWidth,\r\n                //     nRoundedHeight\r\n                // );\r\n                // _oContext.fillRect(\r\n                //     Math.ceil(nLeft) - 0.5,\r\n                //     Math.ceil(nTop) - 0.5,\r\n                //     nRoundedWidth,\r\n                //     nRoundedHeight\r\n                // );\r\n                // _oContext.clearRect(\r\n                //     Math.floor(nLeft) + 0.5,\r\n                //     Math.floor(nTop) + 0.5,\r\n                //     nRoundedWidth,\r\n                //     nRoundedHeight\r\n                // );\r\n                // _oContext.clearRect(\r\n                //     Math.ceil(nLeft) - 0.5,\r\n                //     Math.ceil(nTop) - 0.5,\r\n                //     nRoundedWidth,\r\n                //     nRoundedHeight\r\n                // );\r\n            }\r\n        }\r\n\r\n        _oContext.draw(false, () => {\r\n          setTimeout(() => {\r\n            this.exportImage()\r\n          }, 800)\r\n        })\r\n    };\r\n\r\n    // 保存为图片，将临时路径传给回调\r\n    QRCode.prototype.exportImage = function (callback) {\r\n      if (this._htOption.callback && typeof this._htOption.callback === 'function') {\r\n        wx.canvasToTempFilePath({\r\n            x: 0,\r\n            y: 0,\r\n            width: this._htOption.width,\r\n            height: this._htOption.height,\r\n            destWidth: this._htOption.width,\r\n            destHeight: this._htOption.height,\r\n            canvasId: this.canvasId,\r\n            success: (res) => {\r\n              this._htOption.callback({path: res.tempFilePath})\r\n            }\r\n        })\r\n      } \r\n    }\r\n\r\n    QRCode.CorrectLevel = QRErrorCorrectLevel;\r\n})();\r\n\r\nmodule.exports = QRCode","const formatTime = date => {\r\n  const year = date.getFullYear()\r\n  const month = date.getMonth() + 1\r\n  const day = date.getDate()\r\n  const hour = date.getHours()\r\n  const minute = date.getMinutes()\r\n  const second = date.getSeconds()\r\n\r\n  return [year, month, day].map(formatNumber).join('/') + ' ' + [hour, minute, second].map(formatNumber).join(':')\r\n}\r\n\r\nconst formatNumber = n => {\r\n  n = n.toString()\r\n  return n[1] ? n : '0' + n\r\n}\r\n\r\nvar initPage = function(that){\r\n  var globalData = getApp().globalData\r\n  that.setData(globalData)\r\n\r\n  wx.setNavigationBarTitle({\r\n    title: globalData.shopName\r\n  })\r\n  wx.setNavigationBarColor(\r\n    {\r\n      frontColor: globalData.ngFrontColor,\r\n      backgroundColor: globalData.ngbgColor\r\n    }\r\n  )\r\n  // 不生效\r\n  /**wx.setBackgroundColor({\r\n    backgroundColor: globalData.bgColor\r\n  })**/\r\n}\r\n\r\nconst EventUtil = {\r\n  getParaFromEvent: function(event, name, must) {\r\n    var id = event.currentTarget.dataset[name]\r\n    if (StringUtil.isNotEmpty(id)) {\r\n      return id\r\n    }\r\n    if (must) {\r\n      wx.showToast({\r\n        title: '缺少' + name,\r\n      })\r\n      throw new Error()\r\n    }\r\n  },\r\n  getIndex: function(event) {\r\n    var id = event.currentTarget.dataset.index\r\n    if (StringUtil.isNotEmpty(id)) {\r\n      return id\r\n    }\r\n    wx.showToast({\r\n      title: '缺少Index',\r\n    })\r\n    throw new Error()\r\n  },\r\n  getId: function(event) {\r\n    var id = event.currentTarget.dataset.id\r\n    if (StringUtil.isNotEmpty(id)) {\r\n      return id\r\n    }\r\n    wx.showToast({\r\n      title: '缺少ID',\r\n    })\r\n    throw new Error()\r\n  }\r\n}\r\n\r\nconst ArrayUtil = {\r\n  isArray: function (v) {\r\n    if(!ObjectUtil.verifyValidObject(v)){\r\n      return false\r\n    }\r\n    return Array.isArray(v)\r\n  },\r\n  getEleByIndex: function(arrays, index) {\r\n    if(!ObjectUtil.verifyValidObject(arrays)){\r\n      return\r\n    }\r\n    if(!ObjectUtil.verifyValidObject(index)){\r\n      return\r\n    }\r\n    var ele = arrays[index]\r\n    return ele\r\n  },\r\n  delEleByIndex: function(arrays, index) {\r\n    if(!ObjectUtil.verifyValidObject(arrays)){\r\n      return\r\n    }\r\n    if(!ObjectUtil.verifyValidObject(index)){\r\n      return\r\n    }\r\n    var ele = arrays[index]\r\n    arrays.splice(index, 1)\r\n    return ele\r\n  },\r\n  getEleById: function(arrays, id) {\r\n    if(!ObjectUtil.verifyValidObject(arrays)){\r\n      return\r\n    }\r\n    if(!ObjectUtil.verifyValidObject(id)){\r\n      return\r\n    }\r\n    var ele = arrays.find((ele, index, arrays) => ele.id == id)\r\n    return ele\r\n  },\r\n  replaceEleById: function(arrays, newEle) {\r\n    if(!ObjectUtil.verifyValidObject(arrays)){\r\n      return\r\n    }\r\n    if(!ObjectUtil.verifyValidObject(newEle.id)){\r\n      return\r\n    }\r\n    for (let index = 0; index < arrays.length; index++) {\r\n      const element = arrays[index];\r\n      if(element.id == newEle.id){\r\n        arrays[index] = newEle\r\n        return index\r\n      }\r\n    }\r\n    return -1\r\n  },\r\n  addEle: function(arrays, ele) {\r\n    if(!ObjectUtil.verifyValidObject(arrays)){\r\n      return\r\n    }\r\n    if(!ObjectUtil.verifyValidObject(ele)){\r\n      return\r\n    }\r\n    arrays.push(ele)\r\n  },\r\n  delEleById: function(arrays, id) {\r\n    if(!ObjectUtil.verifyValidObject(arrays)){\r\n      return\r\n    }\r\n    if(!ObjectUtil.verifyValidObject(id)){\r\n      return\r\n    }\r\n    var eleIndex = -1\r\n    var ele\r\n    for (var i = 0; i < arrays.length; i++) {\r\n      ele = arrays[i]\r\n      if (ele.id == id) {\r\n        eleIndex = i\r\n        break\r\n      }\r\n    }\r\n\r\n    if (eleIndex != -1) {\r\n      arrays.splice(eleIndex, 1)\r\n    }\r\n\r\n    return ele\r\n  }\r\n}\r\n\r\nconst StringUtil = {\r\n\r\n  isEmpty: function(str) {\r\n    var r = undefined === str || \"\" === str || null === str\r\n    return r\r\n  },\r\n  isNotEmpty: function(str) {\r\n    var r = undefined !== str && \"\" !== str\r\n    return r\r\n  },\r\n  abbreviatory: function(str, maxL) {\r\n    if (!StringUtil.isEmpty(str) && str.length > (undefined == maxL ? 10 : maxL)) {\r\n      return str.substring(0, 10) + '…'\r\n    }\r\n    return str\r\n  },\r\n  moneyDesc: function(money) {\r\n    return \"￥\" + money + \"元\"\r\n  },\r\n  simplePrint: function(str) {\r\n    if (StringUtil.isNotEmpty(str)) {\r\n      return str\r\n    }\r\n    return '-'\r\n  }\r\n}\r\n\r\n\r\nconst ObjectUtil = {\r\n  isNotUndefined: function(v) {\r\n    return undefined !== v\r\n  },\r\n  isString: function (v) {\r\n    return typeof v === 'string'\r\n  },\r\n  isUndefined: function(v) {\r\n    return undefined === v\r\n  },\r\n  isFunction: function (v) {\r\n    return ObjectUtil.verifyValidObject(v) &&  typeof v === 'function'\r\n  },\r\n  verifyValidObject: function(o) {\r\n    return o !== null && o !== undefined && o !== \"\" && o !== \"null\" && o !== \"undefined\"\r\n  }\r\n}\r\n\r\nconst JsonUtil = {\r\n  hasData: function(v){\r\n    if(!ObjectUtil.verifyValidObject(v) || v == '[]'){\r\n      return false\r\n    }\r\n    v = JsonUtil.toJson(v)\r\n    for (var key in v) {\r\n      if (ObjectUtil.verifyValidObject(v[key])){\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  },\r\n  toJson: function(v) {\r\n    if(typeof v === 'string' && v.indexOf('{') != -1){\r\n      return JSON.parse(v)\r\n    }\r\n    return v\r\n  },\r\n  /**\r\n   * json key 的 数组，已安正序排序\r\n   */\r\n  getKeys: function (paramJson){\r\n    var keys = []\r\n    for (var k in paramJson) {\r\n      keys.push(k)\r\n    }\r\n\r\n    keys.sort()\r\n\r\n    return keys\r\n  },\r\n  /**\r\n   * @param paramJson 数据的json形式\r\n   * @param encode true表示对val进行URIEncode\r\n   * key 排序，然后组织成用&间隔的参数串\r\n   */\r\n  toParamWithSortedKey: function (paramJson, encode){\r\n    var keys = JsonUtil.getKeys(paramJson)\r\n    var paraStr = ''\r\n    var temp = []\r\n    for (var i = 0; i < keys.length; i++) {\r\n      var key = keys[i]\r\n      var val = paramJson[key]\r\n      if(encode){\r\n        val = encodeURIComponent(val)\r\n      }\r\n      var ele = key + '=' + val\r\n      temp.push(ele)\r\n    }\r\n\r\n    if (temp.length > 0) {\r\n      paraStr = temp.join(\"&\")\r\n    }\r\n\r\n    return paraStr\r\n\r\n  },\r\n  /**\r\n   * 组织成用&间隔的参数串\r\n   */\r\n  toParam: function(paramJson) {\r\n    var paraStr = ''\r\n    var temp = []\r\n    for (var k in paramJson) {\r\n      var v = paramJson[k]\r\n      if (!StringUtil.isEmpty(v)) {\r\n        var ele = k + \"=\" + v\r\n        temp.push(ele)\r\n      }\r\n    }\r\n\r\n    if(temp.length > 0){\r\n      paraStr = temp.join(\"&\")\r\n    }\r\n\r\n    return paraStr\r\n  }\r\n}\r\n\r\nvar showMsg = function(msg, callback) {\r\n  wx.showModal({\r\n    title: '提示',\r\n    content: msg,\r\n    showCancel: false,\r\n    success: function (res) {\r\n      if(ObjectUtil.isFunction(callback)){\r\n        callback()\r\n      }\r\n    },\r\n  })\r\n}\r\n\r\n\r\nvar showToast = function (msg) {\r\n  wx.showToast({\r\n    title: msg,\r\n    duration: 2000\r\n  })\r\n}\r\n\r\nvar getCurrentS = function () {\r\n  return Math.floor(new Date().getTime() / 1000)\r\n}\r\n\r\nvar replace4Spe = function(v){\r\n  return v.replace(/[\\\\+]{1}/g, \"==plus==\")\r\n}\r\n\r\nmodule.exports = {\r\n  formatTime: formatTime,\r\n  eventUtil: EventUtil,\r\n  arrayUtil: ArrayUtil,\r\n  stringUtil: StringUtil,\r\n  objectUtil: ObjectUtil,\r\n  jsonUtil: JsonUtil,\r\n  showMsg: showMsg,\r\n  showToast: showToast,\r\n  getCurrentS: getCurrentS,\r\n  replace4Spe: replace4Spe,\r\n  initPage: initPage\r\n}","const util = require(\"./util.js\")\r\nconst aesUtil = require(\"./aes.js\")\r\n\r\n/**\r\n * url: 请求url\r\n * data: 请求data json\r\n * return: k=v&k=v..&sign=signv\r\n * steps: \r\n *  data key 正序，k=v并使用&拼接；拼接其他数据并使用&拼接；生成sign并拼接\r\n */\r\nvar dealParams = function(url, data) {\r\n  if (util.objectUtil.isUndefined(data)) {\r\n    data = {}\r\n  }\r\n\r\n  var dataStrWithSortedKey = util.jsonUtil.toParamWithSortedKey(data)\r\n  var dataEncodeStrWithSortedKey = util.jsonUtil.toParamWithSortedKey(data, true)\r\n\r\n  var newToken = url.indexOf('newToken') !== -1\r\n  // 检查token\r\n  if(!newToken){\r\n\r\n  }\r\n\r\n  // 追加数据\r\n  var appendData = {}\r\n  if (!newToken) {\r\n    appendData['appId'] = getApp().globalData.appId\r\n    appendData['token'] = getApp().globalData.token\r\n    appendData['sessionId'] = getApp().globalData.sessionId\r\n  }\r\n  // 时间戳\r\n  appendData['t'] = Math.floor(new Date().getTime() / 1000)\r\n  // 请求处理版本\r\n  appendData['v'] = 2\r\n  var appendDataStrWithSortedKey = util.jsonUtil.toParam(appendData)\r\n\r\n  var lastData = \"\"\r\n  var lastDataEncode = \"\"\r\n  if (util.stringUtil.isEmpty(dataStrWithSortedKey)) {\r\n    lastData = appendDataStrWithSortedKey\r\n    lastDataEncode = appendDataStrWithSortedKey\r\n  } else {\r\n    lastData = dataStrWithSortedKey + \"&\" + appendDataStrWithSortedKey\r\n    lastDataEncode = dataEncodeStrWithSortedKey + \"&\" + appendDataStrWithSortedKey\r\n  }\r\n\r\n  // 生成sign\r\n  var sign = aesUtil.encrypt(lastData)\r\n  // 这些字符作为参数会变为空格，所以提前替换\r\n  //sign = sign.replace(/[\\\\&\\\\=\\\\+\\\\$\\\\,\\\\#]+/g, \"\")\r\n  sign = util.replace4Spe(sign)\r\n\r\n  // 最终的data数据\r\n  var finalData = lastDataEncode + \"&sign=\" + sign\r\n\r\n  //finalData = encodeURI(finalData)\r\n  return finalData\r\n}\r\n\r\nvar checkApp = function(){\r\n  if (!util.objectUtil.verifyValidObject(getApp().globalData.appId) || !util.objectUtil.verifyValidObject(getApp().globalData.shopId)){\r\n    util.showMsg(\"小程序缺少初始化数据\")\r\n    throw new Error(\"小程序缺少初始化数据\")\r\n  }\r\n}\r\n\r\nvar goPageUtil = {\r\n  goPage : {\r\n    goIndex : function () {\r\n      wx.navigateTo({\r\n        url: '/pages/index/index'\r\n      })\r\n    },\r\n    goShopMan: function () {\r\n      wx.redirectTo({\r\n        url: '/pages/shopMan/shopMan'\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * context = {\r\n *  url: url,\r\n *  data: data,\r\n *  method: method,\r\n *  successCallBack: successCallBack,\r\n *  failCallBack: failCallBack\r\n * }\r\n */\r\nvar request = function(context) {\r\n  var url = context.url\r\n  if (util.stringUtil.isEmpty(url)) {\r\n    util.showMsg(\"缺少URL\")\r\n    return\r\n  }\r\n\r\n  var data = context.data\r\n  data = dealParams(url, data)\r\n\r\n  url = getApp().globalData.requestUrlPrefix + url\r\n\r\n  var method = context.method\r\n  if (util.stringUtil.isEmpty(method)) {\r\n    method = \"GET\"\r\n  }\r\n  method = method.toUpperCase()\r\n\r\n  var contentType = 'text/plain'\r\n  if (method === 'POST') {\r\n    contentType = 'application/x-www-form-urlencoded'\r\n  }else {\r\n    url = url + \"?\" + data\r\n  }\r\n  /*if (!util.stringUtil.isEmpty(context.contentType)) {\r\n    contentType = context.contentType\r\n  }*/\r\n\r\n  var successCallBack = context.successCallBack\r\n  if (typeof successCallBack !== 'function') {\r\n    successCallBack = function() {}\r\n  }\r\n  var failCallBack = context.failCallBack\r\n  if (typeof failCallBack !== 'function') {\r\n    failCallBack = function() {}\r\n  }\r\n\r\n  wx.showLoading({\r\n    title: '努力处理中',\r\n  })\r\n\r\n  wx.request({\r\n    url: url,\r\n    data: data,\r\n    header: {\r\n      'content-type': contentType\r\n    },\r\n    method: method,\r\n    complete(res) {\r\n      wx.hideLoading()\r\n    },\r\n    fail(res) {\r\n      wx.hideLoading()\r\n      var resultStr = JSON.stringify(res)\r\n      if (resultStr.indexOf(\"未登录\") !== -1) {\r\n        util.showMsg('登录失效', function(){\r\n          goPageUtil.goPage.goIndex()\r\n        })\r\n\r\n        return false\r\n      }\r\n      if (resultStr.indexOf(\"notShopMan\") !== -1) {\r\n        util.showMsg('没有绑定店铺', function(){\r\n          goPageUtil.goPage.goShopMan()\r\n        })\r\n\r\n        return false\r\n      }\r\n\r\n      failCallBack(resultStr)\r\n    },\r\n    success(res) {\r\n      wx.hideLoading()\r\n      var resultStr = JSON.stringify(res)\r\n\r\n      console.log(res.data)\r\n      if (res.data.s) {\r\n        if (util.objectUtil.isString(res.data.d)){\r\n          if (res.data.d == '[]'){\r\n            res.data.d = []\r\n          }\r\n          res.data.d = util.jsonUtil.toJson(res.data.d)\r\n        }\r\n        successCallBack(res.data.d)\r\n\r\n      } else {\r\n        if (resultStr.indexOf(\"未登录\") !== -1) {\r\n          util.showMsg('登录失效', function(){\r\n            goPageUtil.goPage.goIndex()\r\n          })\r\n\r\n          return false\r\n        }\r\n        if (resultStr.indexOf(\"notShopMan\") !== -1) {\r\n          util.showMsg('没有绑定店铺', function(){\r\n            goPageUtil.goPage.goShopMan()\r\n          })\r\n  \r\n          return false\r\n        }\r\n\r\n        var msg = res.data\r\n        if (util.objectUtil.isNotUndefined(res.data.m)) {\r\n          msg = res.data.m\r\n        } else if (util.objectUtil.isNotUndefined(res.data.message)){\r\n          msg = res.data.message\r\n        }\r\n        failCallBack(msg)\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nvar requestProxy = function (context){\r\n  checkApp()\r\n\r\n  // TODO 是否需要刷新token\r\n\r\n\r\n  request(context)\r\n}\r\n\r\n\r\nmodule.exports = {\r\n  request: requestProxy,\r\n  dealParams: dealParams\r\n}","const util = require(\"./util.js\")\r\nconst requestUtil = require(\"./request.js\")\r\n\r\nvar getCurrentS = function(){\r\n  return util.getCurrentS()\r\n}\r\n\r\nvar newToken = function(successCallBack, failCallBack) {\r\n  // get from local\r\n  const app = getApp()\r\n  // 打开小程序 复用上次的local token；如果出现登录超时，则重新进入index，非重新打开app，则不使用local token。\r\n  var key = app.globalData.appId + \"Token\"\r\n  if(app.globalData.hasUsedLocalToken != true){\r\n    var tokenCache = app.getCache(key, true)\r\n    if(util.objectUtil.verifyValidObject(tokenCache)){\r\n      app.globalData.expire = tokenCache.expire\r\n      app.globalData.token = tokenCache.token\r\n      app.globalData.sessionId = tokenCache.sessionId\r\n      app.globalData.hasUsedLocalToken = true\r\n    }\r\n\r\n    // check has token\r\n    if (util.objectUtil.verifyValidObject(getApp().globalData.expire) &&\r\n      util.objectUtil.verifyValidObject(getApp().globalData.token) &&\r\n      util.objectUtil.verifyValidObject(getApp().globalData.sessionId) &&\r\n      getApp().globalData.expire > getCurrentS()) {\r\n      return successCallBack()\r\n    }\r\n  }else{\r\n    getApp().delCache(key, true)\r\n  }\r\n\r\n  var sucCall = function(d) {\r\n    console.log(d)\r\n    console.log(\"sucCall\")\r\n\r\n    // 检查token数据\r\n    if (!util.objectUtil.verifyValidObject(d.expire) || !util.objectUtil.verifyValidObject(d.token) ||\r\n      !util.objectUtil.verifyValidObject(d.sessionId) || getCurrentS() > d.expire) {\r\n        getApp().delCache(key, true)\r\n      util.showMsg(\"token错误\")\r\n      return false\r\n    }\r\n    // 存储token等\r\n    getApp().globalData.expire = d.expire\r\n    getApp().globalData.token = d.token\r\n    getApp().globalData.sessionId = d.sessionId\r\n\r\n    getApp().addCache(key, d, null, true)\r\n\r\n    return successCallBack()\r\n  }\r\n  var failCall = function(res) {\r\n    console.log(res)\r\n    console.log(\"failCall\")\r\n    return failCallBack(res)\r\n  }\r\n  wx.login({\r\n    fail: res => {\r\n      console.log(res)\r\n    },\r\n    success: res => {\r\n      //console.log(res)\r\n      var code = res.code\r\n      getApp().globalData.loginCode = code\r\n      //console.log(\"globalData : \" + getApp().globalData)\r\n\r\n      var data = {\r\n        shopId: getApp().globalData.shopId,\r\n        tId: getApp().globalData.tId,\r\n        appId: getApp().globalData.appId,\r\n        requestDomain: getApp().globalData.requestDomain,\r\n        code: code\r\n      }\r\n\r\n      requestUtil.request({\r\n        url: \"/wmall/token/newToken\",\r\n        data: data,\r\n        method: 'POST',\r\n        successCallBack: sucCall,\r\n        failCallBack: failCall\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nmodule.exports = {\r\n  newToken: newToken\r\n}"]}